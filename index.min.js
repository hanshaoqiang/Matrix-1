var xPose=function(t){var r=serialize(t),i=size(t)[0],e=size(t)[1],s=new Matrix(i,e);if(i!==e)return s.set(r,e,i,!0),s.val;for(var n=[],a=0;i>a;a++){for(var s=[],o=0;e>o;o++)s.push(t[o][a]);n.push(s)}return n},alternator=function(t){for(var r=0;r<size(t)[0];r++)for(var i=0;i<size(t)[1];i++)r%2===0&&i%2!==0||r%2!==0&&i%2===0?t[r][i]*=-1:t[r][i]*=1;return t},calcTrace=function(t){for(var r=0,i=0;i<size(t)[0];i++)for(var e=0;e<size(t)[1];e++)i===e&&(r+=t[i][e]);return r},symmetric=function(t){var r=xPose(t);return equal(r,t)?!0:!1},hermitian=function(t){var r=xPose(t);return t=alternator(t),equal(r,t)?!0:!1},equal=function(t,r){var i=size(t)[0],e=size(t)[1],s=size(r)[0],n=size(r)[1];if(i!==s||e!==n)return!1;for(var a=0;i>a;a++)for(var o=0;e>o;o++)if(t[a][o]!==r[a][o])return!1;return!0},calcDeterminant=function(t){if(!squareMatrix(t))return[NaN];for(var r=0,i=0;i<t[0].length;i++){var e=matrixGenerator(t,0,i);0===size(e)[0]?r=t[0]:1===size(e)[0]?i%2===0?r+=t[0][i]*e[0][0]:r-=t[0][i]*e[0][0]:2===size(e)[0]?i%2===0?r+=t[0][i]*(e[0][0]*e[1][1]-e[0][1]*e[1][0]):r-=t[0][i]*(e[0][0]*e[1][1]-e[0][1]*e[1][0]):i%2===0?r+=t[0][i]*calcDeterminant(e):r-=t[0][i]*calcDeterminant(e)}return r},calcAdjoint=function(t){if(!squareMatrix(t))return[NaN];for(var r=[],i=0;i<t.length;i++){for(var e=[],s=0;s<t[i].length;s++)e.push(calcDeterminant(matrixGenerator(t,i,s)));r.push(e)}return r=alternator(xPose(r))},calcInverse=function(t){if(!squareMatrix(t)||0===calcDeterminant(t))return[NaN];for(var r=calcAdjoint(t),i=calcDeterminant(t),e=[],s=0;s<r.length;s++){for(var n=[],a=0;a<r[s].length;a++)n.push(Math.round(r[s][a]/i*1e3)/1e3);e.push(n)}return e},stringer=function(t){for(var r="",i=0;i<t.length;i++){r+="\n	";for(var e=0;e<t[i].length;e++)0===e&&(r+="|	"),r+=t[i][e]+"	",e===t[i].length-1&&(r+="|")}return r},matrixGenerator=function(t,r,i){for(var e=[],s=0;s<t.length;s++){for(var n=[],a=0;a<t[s].length;a++)s!==r&&a!==i&&n.push(t[s][a]);n.length>0&&e.push(n)}return e},size=function(t){return rows=void 0===t?0:t.length,cols=void 0===t[0]?0:t[0].length,[rows,cols]},strictSize=function(t){for(var r=[],i=void 0===t?0:t.length,e=0;e<t.length;e++)r.push(t[e].length);return r=r.filter(function(t,i){return r.indexOf(t)===i}),r=r.pop(),[i,r]},squareMatrix=function(t){return strictSize(t)[0]===strictSize(t)[1]?!0:!1},serialize=function(t){rows=size(t)[0],cols=size(t)[1],k=0,vector=[];for(var r=0;r<rows;r++)for(var i=0;i<cols;i++)vector.push(t[r][i]);return vector},Matrix=function(t,r,i){this.val=[],i=i===!1?!1:!0;for(var e=0;t>e;e++){for(var s=[],n=0;r>n;n++)e===n&&i===!0?s.push(1):s.push(0);this.val.push(s)}this.determinant=i===!0?1:0,this.adjoint=this.val,this.inverse=i===!0?this.val:[NaN],this.stringify(),this.valTrace=i===!0?t:0};Matrix.prototype.set=function(t,r,i){for(var e=0,s=[],n=0;r>n;n++){for(var a=[],o=e;i+e>o;o++)a.push(t[o]);e+=i,s.push(a)}return this.val=s,this.det(),this.adj(),this.inv(),this.stringify(),this.trace(),this},Matrix.prototype.transpose=function(){this.val,this.adjoint,this.inverse;return this.val=xPose(this.val),this.adjoint=xPose(this.adjoint),this.inverse=xPose(this.inverse),this.stringify(),this.trace(),this},Matrix.prototype.det=function(){return this.determinant=calcDeterminant(this.val),this},Matrix.prototype.adj=function(){return this.adjoint=calcAdjoint(this.val),this.stringify(),this},Matrix.prototype.inv=function(){return this.inverse=calcInverse(this.val),this.stringify(),this},Matrix.prototype.stringify=function(){return this.valString=stringer(this.val),this.adjointString=stringer(this.adjoint),this.inverseString=stringer(this.inverse),this},Matrix.prototype.add=function(){for(var t=[],r=this.val,i=arguments.length,e=size(r)[0],s=size(r)[1],n=0;i>n;n++)size(arguments[n])[0]!==e||size(arguments[n])[1]!==s||t.push(arguments[n]);for(n=0;i>n;n++)for(var a=0;e>a;a++)for(var o=0;s>o;o++)r[a][o]+=t[n][a][o];return this.val=r,this.det(),this.adj(),this.inv(),this.stringify(),this.trace(),this},Matrix.prototype.sub=function(){for(var t=[],r=this.val,i=arguments.length,e=size(r)[0],s=size(r)[1],n=0;i>n;n++)size(arguments[n])[0]!==size(r)[0]||size(arguments[n])[1]!==size(r)[1]||t.push(arguments[n]);for(n=0;i>n;n++)for(var a=0;e>a;a++)for(var o=0;s>o;o++)r[a][o]-=t[n][a][o];return this.val=r,this.det(),this.adj(),this.inv(),this.stringify(),this.trace(),this},Matrix.prototype.multiply=function(){for(var t=[],r=this.val,i=arguments.length,e=0;i>e;e++)t.push(arguments[e]);for(var e=0;i>e;e++){var s=size(r)[0],n=size(r)[1],a=size(t[e])[0],o=size(t[e])[1];if(n!==a)return this.val=[NaN],this;var h=new Matrix(s,o,!1);h=h.val;for(var u=0;s>u;u++)for(var v=0;o>v;v++)for(var f=0;n>f;f++)h[u][v]+=r[u][f]*t[e][f][v];r=h}return this.val=h,this.det(),this.adj(),this.inv(),this.stringify(),this.trace(),this},Matrix.prototype.scale=function(){for(var t=this.val,r=1,i=size(t)[0],e=size(t)[1],s=arguments.length,n=0;s>n;n++)r*=arguments[n];for(var n=0;i>n;n++)for(var a=0;e>a;a++)t[n][a]*=r;return this.val=t,this.det(),this.adj(),this.inv(),this.trace(),this},Matrix.prototype.isEqual=function(t){this.val;return equal(this.val,t)},Matrix.prototype.isSymmetric=function(){var t=this.val;return symmetric(t)},Matrix.prototype.isHermitian=function(){var t=this.val;return hermitian(t)},Matrix.prototype.trace=function(){var t=this.val;return this.valTrace=calcTrace(t),this},module.exports=Matrix;